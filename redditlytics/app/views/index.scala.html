<!DOCTYPE html>
<html lang="en">
    <head>
        @* Here's where we render the page title `String`. *@
    <title>Reddit-Lytics</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="author" content="colorlib.com">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,800" rel="stylesheet" />
    <link rel="stylesheet" media="screen" href='@routes.Assets.versioned("stylesheets/main.css")'>
    <link rel="shortcut icon" type="image/png" href='@routes.Assets.versioned("images/favicon.png")'>
    </head>
    <body>

        <script src='@routes.Assets.versioned("javascripts/jquery.min.js")' type="text/javascript"></script>
        <div class="s004">
            <div>
                <button style="margin: 0px 0px 150px 875px;
                    border-radius: 10px;" type="button" id="word_stats">Word Statistics</button>
            </div>
            <div>
                <input class="key" id="key" name="key" type="text" placeholder="Type to search">
                <button style="border-radius: 8px" type="button" id="submit_button">Search</button>
            </div>

            <div style="margin-top: 40px;
                width: 100%">
                <table>
                    <thead>
                        <tr>
                            <th>Published on</th>
                            <th>Author</th>
                            <th>SUBREDDIT</th>
                            <th>Content</th>
                        </tr>
                    </thead>
                    <tbody id="records_table"></tbody>
                </table>
            </div>
        </div>
        <script>
    $("#submit_button").click(function () {
        $.ajax({
            url: "/" + document.getElementById("key").value
        }).done(function (data) {
            let d = data.split("%5097%");
            let table = document.getElementById("records_table");
            $.each(d, function (i, item) {
                let row = table.insertRow(0);
                let cell1 = row.insertCell(0);
                let cell2 = row.insertCell(1);
                let cell3 = row.insertCell(2);
                let cell4 = row.insertCell(3);
                let it = JSON.parse(item);
                cell1.innerHTML = new Date(it.retrieved_on).toLocaleDateString();
                cell2.innerHTML = it.author;
                cell3.innerHTML = it.subreddit;
                cell4.innerHTML = it.selftext;
            });
        });
    });

    $("#word_stats").click(function () {
        $.ajax({
            url: "/search/" + document.getElementById("key").value
        }).done(function () {
            window.location.href = "/search/" + document.getElementById("key").value;
        });
    });
</script>
        <script src='@routes.Assets.versioned("javascripts/choices.js")' type="text/javascript"></script>
        <script src='@routes.Assets.versioned("javascripts/main.js")' type="text/javascript"></script>
    </body>
</html>